(function(t){function e(e){for(var a,l,n=e[0],o=e[1],c=e[2],d=0,u=[];d<n.length;d++)l=n[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&u.push(r[l][0]),r[l]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);h&&h(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,n=1;n<i.length;n++){var o=i[n];0!==r[o]&&(a=!1)}a&&(s.splice(e--,1),t=l(l.s=i[0]))}return t}var a={},r={app:0},s=[];function l(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=a,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(i,a,function(e){return t[e]}.bind(null,a));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var h=o;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",{attrs:{id:"mural-app"}},[i("Mural")],1)},s=[],l=(i("ac1f"),i("5319"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fluid pb-0 pt-0"},[i("div",{staticClass:"mural-wrapper justify-md-space-between"},[i("div",{staticClass:"mural-wrapper__image pt-0"},[i("div",{staticClass:"d-flex justify-center"},[i("h2",{staticClass:"mural__title"},[t._v(t._s(t.t.app_header))])]),i("MuralControls",{staticClass:"hidden-md-and-up",attrs:{hideOnMobile:!0}}),i("v-row",[i("v-col",{staticClass:"ml-4 mr-6 pt-md-0",staticStyle:{"background-color":"#EFF0F0"},attrs:{elevation:0}},[i("MuralImage")],1),i("v-col",{staticClass:"d-flex justify-center mt-md-0",attrs:{cols:"12",md:"12"}},[i("div",{staticClass:"toggle-switch toggle-switch__mural-app",class:{"is-active":t.breadthStatus}},[i("span",{staticClass:"toggle-switch__label"},[t._v(t._s(t.t.controls.breadths.hideBreadths))]),i("button",{staticClass:"toggle-switch__switch",on:{click:function(e){return t.applyFilter("breadths")}}},[i("span",[t._v(" Toggle images style ")])]),i("span",{staticClass:"toggle-switch__label"},[t._v(t._s(t.t.controls.breadths.showBreadths))])])])],1),i("v-row",[i("v-col",{staticClass:"d-flex justify-center mb-12 mb-md-0 pt-md-2",attrs:{cols:"12"}},[i("p",{staticClass:"mural__description text-center"},[t._v(" Denna fondtapet är "+t._s(t.wallpaper.pattern_width)+"cm bred och "+t._s(t.wallpaper.roll_length)+"cm hög och levereras uppdelad på "+t._s(t.getNumBreadths)+" stycken, "+t._s(t.wallpaper.roll_width)+"cm breda våder. ")])])],1)],1),i("div",{staticClass:"pb-0 pt-0 controls__area"},[i("v-card",{staticStyle:{height:"100%"},attrs:{elevation:0}},[i("MuralControls",{key:t.overlaySize,staticClass:"controls--bottom"})],1)],1)])])}),n=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fluid"},[i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.linePaddings,expression:"linePaddings"}],staticClass:"mural-rulers"},[i("div",{staticClass:"mural-box"}),i("div",{staticClass:"line-area line-area__width width"},[i("div",{staticClass:"line line--no-after"}),i("span"),i("p",{staticClass:"line-area__text"},[t._v(t._s(t.overlaySize.width)+" cm")]),i("span"),i("div",{staticClass:"line line--no-before"})]),i("div",{staticClass:"line-area line-area__height height"},[i("div",{staticClass:"line line--no-after"}),i("p",{staticClass:"line-area__text"},[t._v(t._s(t.overlaySize.height)+" cm")]),i("div",{staticClass:"line line--no-before"})]),i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.imageHeight,expression:"imageHeight"}],staticClass:"mural-image"},[i("Dragable",{staticClass:"mural-image__image"}),i("Selection",{staticClass:"mural-image__selection"})],1)])])},c=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"mural-dragable",style:""+t.breadthWidth},[i("figure",{staticClass:"figure mural-dragable__item",attrs:{id:"jsFigure"}},[i("div",{staticClass:"km-image",class:{bw:t.filters.grayScale,hf:t.filters.flipHorizontal},style:{backgroundImage:"url("+t.image.url+")"},attrs:{alt:t.image.alt,"aspect-ratio":t.image.ratio}})])])},d=[],u=(i("b680"),{data:function(){return{filters:{},overlaySize:{},wallpaper:{},image:{},active:!1,dragItem:{},container:{},selection:{},currentX:0,currentY:0,initialX:0,initialY:0,offsetX:0,offsetY:0,cuttingsData:{},repeat_height:!1}},watch:{"overlaySize.width":function(){var t=this;this.$nextTick((function(){t.imageSize(),t.figureSize(),t.validatePosition(t.offsetX,t.offsetY)}))},"overlaySize.height":function(){var t=this;this.$nextTick((function(){t.imageSize(),t.figureSize(),t.validatePosition(t.offsetX,t.offsetY)}))}},computed:{breadthWidth:function(){var t=100,e=this.wallpaper.roll_width/this.wallpaper.pattern_width*100,i=this.wallpaper.roll_width/this.overlaySize.width*100;return i>e&&(i=e),t+=i,"width: "+t+"%;"}},methods:{onResize:function(){var t=this;this.$nextTick((function(){t.imageSize(),t.figureSize(),t.validatePosition(t.offsetX,t.offsetY)}))},dragStart:function(t){"touchstart"===t.type?(this.initialX=t.touches[0].clientX-this.offsetX,this.initialY=t.touches[0].clientY-this.offsetY):(this.initialX=t.clientX-this.offsetX,this.initialY=t.clientY-this.offsetY),t.target===this.selection&&(this.active=!0)},drag:function(t){if(this.active){t.preventDefault(),this.mural.classList.add("drag-active");var e=this.currentX,i=this.currentY;"touchmove"===t.type?(e=t.touches[0].clientX-this.initialX,i=t.touches[0].clientY-this.initialY):(e=t.clientX-this.initialX,i=t.clientY-this.initialY),this.validatePosition(e,i)}},validatePosition:function(t,e){var i=document.querySelector(".mural-image"),a=i.getBoundingClientRect(),r=this.selection,s=r.getBoundingClientRect(),l=this.dragItem,n=l.getBoundingClientRect(),o=s.left-a.left,c=o+s.width,h=t+n.width;t>o&&(t=o),h<c&&(t=c-n.width);var d=s.top-a.top,u=d+s.height,m=e+n.height;e>d&&(e=d),m<u&&(e=u-n.height),this.offsetX=t,this.offsetY=e,this.setTranslate(t,e,this.dragItem),this.setCuttingsData(a,s,n)},dragEnd:function(){this.mural.classList.remove("drag-active"),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,this.$store.dispatch("setCuttingsData",this.cuttingsData)},setTranslate:function(t,e,i){i.style.transform="translate3d("+t+"px, "+e+"px, 0)"},setCuttingsData:function(t,e,i){var a=e.left-i.left,r=e.top-i.top,s=a/i.width,l=s+e.width/i.width,n=r/i.height,o=n+e.height/i.height;this.cuttingsData={cutFromX:s.toFixed(2),cutToX:l.toFixed(2),cutFromY:n.toFixed(2),cutToY:o.toFixed(2)}},imageSize:function(){var t=document.querySelector(".km-image");if(t)if(this.repeat_height){var e=this.wallpaper.pattern_width+this.wallpaper.roll_width,i=e/this.wallpaper.pattern_height*100,a=i;this.overlaySize.width>this.overlaySize.height&&(a=this.wallpaper.pattern_width/this.overlaySize.width*100,a>i&&(a=i));var r=1-this.wallpaper.roll_width/this.overlaySize.width;this.overlaySize.width>this.wallpaper.pattern_height&&(a*=r),t.style.backgroundSize=a+"%"}else t.style.backgroundSize="contain"},figureSize:function(){var t=this.dragItem,e=1,i=0,a=100;if(t){var r=document.querySelector(".mural-selection__inner"),s=r.getBoundingClientRect().height;if(this.overlaySize.width>this.overlaySize.height&&(e=this.wallpaper.pattern_height/this.overlaySize.height,i=s*e),this.overlaySize.width<=this.wallpaper.pattern_height){var l=document.querySelector(".mural-selection"),n=l.getBoundingClientRect().height;i=n}var o=this.wallpaper.pattern_width-this.wallpaper.roll_width,c=this.wallpaper.pattern_width+this.wallpaper.roll_width,h=1+this.wallpaper.pattern_height/o;this.overlaySize.width<c&&(console.log(h),h<2&&(a=100*h)),t.style.height="calc("+i+"px - 4px)",t.style.width=a+"%"}},hideBorders:function(){for(var t=document.querySelectorAll(".mural-start-view"),e=0;e<t.length;e++)t[e].classList.remove("mural-start-view")}},mounted:function(){var t=this;this.filters=this.$store.getters.getFilters,this.overlaySize=this.$store.getters.getOverlaySize,this.wallpaper=this.$store.getters.getWallpaperData,this.image=this.$store.getters.getImageData,this.dragItem=document.querySelector(".mural-dragable__item"),this.container=document.querySelector(".mural-image__selection"),this.selection=document.querySelector(".km-selection"),this.mural=document.querySelector(".mural-image"),this.container.addEventListener("touchstart",this.dragStart,!1),this.container.addEventListener("touchend",this.dragEnd,!1),this.container.addEventListener("touchend",this.hideBorders,!1),this.container.addEventListener("touchmove",this.drag,!1),this.container.addEventListener("mousedown",this.dragStart,!1),this.container.addEventListener("mouseup",this.dragEnd,!1),this.container.addEventListener("mouseup",this.hideBorders,!1),this.container.addEventListener("mousemove",this.drag,!1),window.addEventListener("mouseup",this.dragEnd,!1),this.$nextTick((function(){t.imageSize(),t.dragItem.style.transform="translate3d(0px, 0px, 0px)"}))}}),m=u,p=i("2877"),v=i("269a"),g=i.n(v),f=i("dc22"),_=Object(p["a"])(m,h,d,!1,null,null,null),w=_.exports;g()(_,{Resize:f["a"]});var y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.edgeSize,expression:"edgeSize"}],staticClass:"mural-selection"},[i("div",{staticClass:"mural-selection__item mural-start-view",style:""+t.xBorderSize}),i("div",{staticClass:"mural-selection__inner",style:""+t.innerSelectionSize},[i("div",{staticClass:"mural-selection__item mural-start-view",style:""+t.yBorderSize},[i("div",{staticClass:"mural-selection__item mural-edge mural-edge__top mural-start-view"})]),i("div",{staticClass:"mural-selection__item mural-selection__item--selection",style:""+t.selectionSize},[i("canvas",{staticClass:"km-selection",attrs:{id:"breadths"}})]),i("div",{staticClass:"mural-selection__item mural-selection__item--no-background",style:""+t.yBorderSize},[i("div",{staticClass:"mural-selection__item mural-edge mural-edge__bottom mural-start-view"})])]),i("div",{staticClass:"mural-selection__item mural-start-view",style:""+t.xBorderSize})])},S=[],b={data:function(){return{overlaySize:{},wallpaper:{},filters:{},selection:{},mural:{}}},watch:{"overlaySize.width":function(){var t=this;this.$nextTick((function(){t.clearBreadths(),t.edgeSize()}))},"overlaySize.height":function(){var t=this;this.$nextTick((function(){t.clearBreadths(),t.edgeSize()}))},"filters.showBreadths":function(){this.clearBreadths()}},computed:{innerSelectionSize:function(){var t="height: ",e=100,i="width: ",a=100;return this.overlaySize.width>this.wallpaper.pattern_height&&(e=this.overlaySize.height/this.overlaySize.width*100),t+=e+"%;",this.overlaySize.width<this.wallpaper.pattern_height&&(a=this.overlaySize.width/this.wallpaper.pattern_height*100),i+=a+"%;",t+i},xBorderSize:function(){var t="height: 100%; width: ",e=0;if(this.overlaySize.width<=this.wallpaper.pattern_height){var i=1-this.overlaySize.width/this.wallpaper.pattern_height;e=100*i/2}return t+="calc("+e+"% + 1px);",t},yBorderSize:function(){var t="height: ",e=0;if(this.overlaySize.width<=this.wallpaper.pattern_height){var i=1-this.overlaySize.height/this.wallpaper.pattern_height;e=100*i/2}return t+e+"%"},selectionSize:function(){var t="height: ",e=100;if(this.overlaySize.width<=this.wallpaper.pattern_height){var i=this.overlaySize.height/this.wallpaper.pattern_height;e=100*i}return t+e+"%"}},methods:{clearBreadths:function(){var t=this,e=document.getElementById("breadths");if(e.getContext){var i=e.getContext("2d");this.$nextTick((function(){i.canvas.width=i.canvas.offsetWidth,t.drawBreadths(i)}))}},drawBreadths:function(t){t.lineWidth=2,t.strokeStyle="hotpink",window.innerWidth<960&&(t.lineWidth=1);var e=document.querySelector(".km-selection"),i=e.getBoundingClientRect().width,a=i/this.overlaySize.width,r=this.overlaySize.width/this.wallpaper.roll_width,s=this.wallpaper.roll_width*a;if(this.filters.showBreadths)for(var l=0,n=s;l<r-1;l++)t.moveTo(n,0),t.lineTo(n,1e3),t.stroke(),n+=s},edgeSize:function(){var t=document.querySelectorAll(".mural-edge"),e=0;if(t){var i=this.selection,a=this.mural;e+=a.offsetHeight-i.offsetHeight-4,e/=2;for(var r=0;r<t.length;r++)t[r].style.height=e+"px";var s=document.querySelector(".mural-edge__top");s.style.top="-"+e+"px"}}},mounted:function(){var t=this;this.overlaySize=this.$store.getters.getOverlaySize,this.wallpaper=this.$store.getters.getWallpaperData,this.filters=this.$store.getters.getFilters,this.selection=document.querySelector(".km-selection"),this.mural=document.querySelector(".mural-image"),this.$nextTick((function(){t.clearBreadths(),t.edgeSize()}))}},z=b,x=Object(p["a"])(z,y,S,!1,null,null,null),C=x.exports;g()(x,{Resize:f["a"]});var E={components:{Dragable:w,Selection:C},data:function(){return{filters:{},overlaySize:{},wallpaper:{},image:{}}},watch:{"overlaySize.width":function(){var t=this;this.$nextTick((function(){t.linePaddings(),t.imageHeight()}))},"overlaySize.height":function(){var t=this;this.$nextTick((function(){t.linePaddings(),t.imageHeight()}))}},methods:{linePaddings:function(){var t=document.querySelector(".km-selection"),e=document.querySelector(".mural-image"),i=document.querySelector(".line-area__width"),a=document.querySelector(".line-area__height");if(t){i.style.padding="0",a.style.padding="0";var r=e.offsetWidth-t.offsetWidth-4;r/=2,i.style.padding="0 "+r+"px";var s=e.offsetHeight-t.offsetHeight-4;s/=2,a.style.padding=s+"px 0"}},imageHeight:function(){var t=document.querySelector(".mural-image");if(t){var e=t.getBoundingClientRect().width;t.style.height=e+"px"}}},mounted:function(){var t=this;this.filters=this.$store.getters.getFilters,this.overlaySize=this.$store.getters.getOverlaySize,this.wallpaper=this.$store.getters.getWallpaperData,this.image=this.$store.getters.getImageData,this.$nextTick((function(){t.linePaddings(),t.imageHeight()}))}},k=E,O=Object(p["a"])(k,o,c,!1,null,null,null),T=O.exports;g()(O,{Resize:f["a"]});var D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"controls single-product"},[i("v-hover",{attrs:{disabled:""}},[i("span",{staticClass:"controls__close",class:{"hidden-sm-and-down":!t.hideOnMobile},on:{click:t.closeApp}},[i("svg",{attrs:{viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M19.688 18L34.65 3.039a1.192 1.192 0 0 0 0-1.687 1.19 1.19 0 0 0-1.689 0l-14.96 14.963L3.041 1.35A1.194 1.194 0 1 0 1.35 3.038l14.963 14.963L1.349 32.963a1.194 1.194 0 1 0 1.692 1.687l14.96-14.963 14.96 14.963a1.19 1.19 0 0 0 1.69 0 1.192 1.192 0 0 0 0-1.687L19.687 18.001z",stroke:"#DE8A83",fill:"#DE8A83","fill-rule":"evenodd"}})])])]),i("small",{staticClass:"single-product__sub-title hidden-sm-and-down"},[t._v(t._s(t.wallpaper.collection)+" "+t._s(t.wallpaper.sku))]),i("h2",{staticClass:"single-product__title heading hidden-sm-and-down"},[t._v(t._s(t.wallpaper.title))]),i("h3",{staticClass:"controls__sub-title",class:{"hidden-sm-and-down":!t.hideOnMobile}},[t._v(" "+t._s(t.t.controls_header))]),i("div",{staticClass:"d-flex controls__mesure"},[i("div",{staticClass:"controls__icon-wrapper",class:{"hidden-sm-and-down":!t.hideOnMobile,"size-error":t.minWidthError||t.maxWidthError}},[t._m(0),i("div",{staticClass:"input-field"},[i("v-text-field",{attrs:{suffix:"cm",type:"number","background-color":"transparent",filled:""},on:{input:function(e){return t.validateWidth()}},model:{value:t.overlayWidth,callback:function(e){t.overlayWidth=t._n(e)},expression:"overlayWidth"}}),i("p",{staticClass:"input-field__label input-field__label--width"},[t._v(t._s(t.t.input_width_label))])],1)]),i("div",{staticClass:"controls__icon-wrapper",class:{"hidden-sm-and-down":!t.hideOnMobile,"size-error":t.minHeightError||t.maxHeightError}},[t._m(1),i("div",{staticClass:"input-field"},[i("v-text-field",{staticClass:"ml-2",attrs:{suffix:"cm",type:"number","background-color":"transparent",filled:""},on:{input:function(e){return t.validateHeight()}},model:{value:t.overlayHeight,callback:function(e){t.overlayHeight=t._n(e)},expression:"overlayHeight"}}),i("p",{staticClass:"input-field__label input-field__label--height"},[t._v(t._s(t.t.input_height_label))])],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.sizeError,expression:"sizeError"}],staticClass:"controls__error-box",class:{"hidden-sm-and-down":!t.hideOnMobile,"size-error":t.sizeError}},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.maxHeightError,expression:"maxHeightError"}]},[t._v(" OBS! Mönstrets maxhöjd är "+t._s(t.wallpaper.pattern_height)+"cm "),i("br"),i("br"),t._v(" Din vägg är högre än mönstret, men vi hjälper dig att göra en anpassning som passar just din vägg. "),i("br"),i("br"),t._v(" Kontakta oss på "),i("a",{attrs:{href:"mailto:order@borastapeter.com"}},[t._v("order@borastapeter.com")]),t._v(" så återkommer vi med mer detaljer. ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.minHeightError,expression:"minHeightError"}]},[t._v(" Din vägg är för låg. ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.maxWidthError,expression:"maxWidthError"}]},[t._v(" Din vägg är för bred. ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.minWidthError,expression:"minWidthError"}]},[t._v(" Din vägg är för smal. ")])]),t.laminationAvaliable?i("div",[i("h3",{staticClass:"controls__sub-title mt-12 mb-3",class:{"hidden-sm-and-down":t.hideOnMobile}},[t._v(t._s(t.t.supplement.header))]),i("div",{staticClass:"d-flex flex-row"},[i("div",{staticClass:"controls__checkbox",class:{"hidden-sm-and-down":t.hideOnMobile}},[i("label",{staticClass:"controls__label",attrs:{for:"mural-app-laminate"},on:{click:function(e){return t.toggleLaminate()}}},[i("input",{attrs:{type:"checkbox",name:"checkbox",id:"mural-app-laminate",value:"value"},domProps:{checked:t.laminate}}),t._v(" "+t._s(t.t.supplement.laminate_description)+" ")])])])]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.sizeError,expression:"!sizeError"}],staticClass:"controls__price mt-0 mt-md-4 mb-5",class:{"hidden-sm-and-down":t.hideOnMobile}},[i("h2",{staticClass:"controls__price-total"},[t._v(t._s(t._f("toDecimals")(t.totalPrice))+" kr")]),i("h4",{staticClass:"controls__price-sqm"},[t._v(" ( "+t._s(t._f("toDecimals")(t.wallpaper.price))+" kr/m"),i("sup",[t._v("2")]),t._v(" )")])]),i("v-btn",{staticClass:"white--text order btn js-buy-mural",class:{"hidden-sm-and-down":t.hideOnMobile,"size-error":t.sizeError},staticStyle:{height:"5rem"},attrs:{block:"",depressed:"",color:"#1D5E3C","text-color":"white",disabled:t.sizeError},on:{click:function(e){return t.sendOrder()}}},[t._v(" "+t._s(t.t.order_button_text)+" ")]),i("p",{staticClass:"single-product__buying-info single-product__buying-info--small mt-4",class:{"hidden-sm-and-down":t.hideOnMobile}},[t._v(t._s(t.t.order_button_description))]),t.optionsAvaliable?i("div",{staticClass:"d-flex flex-row justify-space-between"},[i("v-card",{attrs:{flat:""}},[i("v-btn",{attrs:{small:"",outlined:"",block:""},on:{click:function(e){return t.applyFilter("zoomIn")}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Förstora ")],1),i("v-btn",{attrs:{small:"",outlined:"",block:""},on:{click:function(e){return t.applyFilter("rotate")}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-rotate-right")]),t._v(" 90° ")],1),i("v-btn",{attrs:{small:"",outlined:"",block:""},on:{click:function(e){return t.applyFilter("grayScale")}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-invert-colors")]),t._v(" Gråskala ")],1)],1),i("v-card",{attrs:{flat:""}},[i("v-btn",{attrs:{small:"",outlined:"",block:""},on:{click:function(e){return t.applyFilter("zoomOut")}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-minus")]),t._v(" Förminska ")],1),i("v-btn",{attrs:{small:"",outlined:"",block:""},on:{click:function(e){return t.applyFilter("flip")}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-rotate-right")]),t._v(" Spegelvänd ")],1),i("v-btn",{attrs:{small:"",outlined:"",block:""},on:{click:function(e){return t.applyFilter("breadths")}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-view-column")]),t._v("Visa våder ")],1)],1)],1):t._e()],1)},I=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"controls__icon-container"},[i("span",{staticClass:"controls__icon-up-down controls__icon-up-down--rotate"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"controls__icon-container"},[i("span",{staticClass:"controls__icon-up-down"})])}],$=(i("caad"),i("2532"),{props:{hideOnMobile:{default:!1}},data:function(){return{overlayHeight:0,overlayWidth:0,wallpaper:{},borders:{},laminate:!1,optionsAvaliable:!1,laminationAvaliable:!1,maxHeightError:!1,minHeightError:!1,minWidthError:!1,maxWidthError:!1}},computed:{img:function(){return this.$store.getters.getImageData},t:function(){return this.$store.getters.getTranslations},totalPrice:function(){var t=parseInt(this.wallpaper.price);this.laminate&&(t+=parseInt(this.wallpaper.lamination_price));var e=this.overlayWidth/100*(this.overlayHeight/100),i=e*t;return i},sizeError:function(){var t=[this.maxHeightError,this.minHeightError,this.maxWidthError,this.minWidthError],e=!1;return t.includes(!0)&&(e=!0),e}},filters:{toDecimals:function(t){return(t/100).toFixed(2)}},methods:{applyFilter:function(t){this.$store.dispatch("updateFilters",t)},closeApp:function(){var t=document.getElementsByTagName("body"),e=t[0].className;e=e.replace(" mural-modal--body",""),t[0].className=e;var i=document.getElementsByTagName("html");e=i[0].className,e=e.replace(" mural-modal--html-no-overflow",""),i[0].className=e;var a=document.getElementById("mural-modal-wrapper");a.className="mural-modal";for(var r=this.borders,s=0;s<r.length;s++)r[s].classList.add("mural-start-view")},validateWidth:function(){var t=this.wallpaper.roll_width,e=2e3;this.overlayWidth<t?(this.minWidthError=!0,this.updateOverlaySize("width",t)):this.overlayWidth>e?(this.maxWidthError=!0,this.updateOverlaySize("width",e)):(this.maxWidthError=!1,this.minWidthError=!1,this.updateOverlaySize("width",this.overlayWidth))},validateHeight:function(){var t=this.wallpaper.pattern_height,e=100;this.overlayHeight>t?(this.maxHeightError=!0,this.updateOverlaySize("height",t)):this.overlayHeight<e?(this.minHeightError=!0,this.updateOverlaySize("height",e)):(this.maxHeightError=!1,this.minHeightError=!1,this.updateOverlaySize("height",this.overlayHeight))},updateOverlaySize:function(t,e){this.$store.dispatch("setOverlaySize",{type:t,size:e})},toggleLaminate:function(){this.laminate=!this.laminate,this.$store.dispatch("setLamination",this.laminate)},sendOrder:function(){this.$store.dispatch("sendOrder"),this.closeApp();var t=jQuery;t(".js-buy-mural").click((function(){var e=t(".js-product-form .form-submit");e.trigger("mousedown")}))}},mounted:function(){this.overlayHeight=this.$store.getters.getOverlaySize.height,this.overlayWidth=this.$store.getters.getOverlaySize.width,this.wallpaper=this.$store.getters.getWallpaperData,this.borders=document.querySelectorAll(".mural-start-view"),this.validateWidth(),this.validateHeight()}}),B=$,A=i("6544"),H=i.n(A),W=i("8336"),F=i("b0af"),N=i("ce87"),j=i("132d"),M=i("8654"),L=Object(p["a"])(B,D,I,!1,null,null,null),R=L.exports;H()(L,{VBtn:W["a"],VCard:F["a"],VHover:N["a"],VIcon:j["a"],VTextField:M["a"]});var q={components:{MuralControls:R,MuralImage:T},computed:{breadthStatus:function(){return this.$store.getters.getFilters.showBreadths},getNumBreadths:function(){return this.$store.getters.getNumBreadths},t:function(){return this.$store.getters.getTranslations},wallpaper:function(){return this.$store.getters.getWallpaperData},overlaySize:function(){var t=this.$store.getters.getOverlaySize,e="";return window.innerWidth<960&&(e=t.width+t.height),e}},methods:{applyFilter:function(t){this.$store.dispatch("updateFilters",t)}}},Y=q,X=i("62ad"),P=i("0fd9"),V=Object(p["a"])(Y,l,n,!1,null,null,null),G=V.exports;H()(V,{VCard:F["a"],VCol:X["a"],VRow:P["a"]});var J={name:"App",components:{Mural:G},data:function(){return{}},methods:{getNidFromDrupal:function(){var t=Drupal.settings.currentPath;return t.replace("node/","")}},beforeCreate:function(){this.$store.commit("INITIALIZE_STORE")},mounted:function(){var t="sv";this.$store.dispatch("loadImageData",this.getNidFromDrupal()),this.$store.dispatch("loadSettingsData",t)}},U=J,Z=(i("5c0b"),i("7496")),Q=Object(p["a"])(U,r,s,!1,null,null,null),K=Q.exports;H()(Q,{VApp:Z["a"]});var tt=i("f309");a["a"].use(tt["a"]);var et=new tt["a"]({}),it=(i("d3b7"),i("2f62")),at=nt((function(t){localStorage.setItem("muralappen",JSON.stringify(t))}),200),rt=function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}},st=function(t){var e=localStorage.getItem("muralappen");e&&t.replaceState(JSON.parse(e))},lt=function(t){if(!rt)return!1;st(t),t.subscribe((function(t,e){at(e)}))};function nt(t,e,i){var a;return function(){var r=this,s=arguments,l=function(){a=null,i||t.apply(r,s)},n=i&&!a;clearTimeout(a),a=setTimeout(l,e),n&&t.apply(r,s)}}var ot=lt;a["a"].use(it["a"]);var ct=new it["a"].Store({plugins:[ot],state:{filters:{grayScale:!1,flipHorizontal:!1,showBreadths:!1,rotate:0,zoom:0},image:{lowres:"https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=600&q=80",url:"https://www.borastapeter.com/sites/borastapeter.com/files/storage/product-images/MagicForestMural_Image_Tile_Item_7481.jpg"},settings:{overlaySize:{height:265,width:180},laminate:!1},translations:{controls_header:"Dina väggmått",app_header:"Anpassa din tapet",input_height_label:"Höjd (cm)*",input_width_label:"Bredd (cm)*",order_button_text:"Beställ tapet",order_button_description:"Beställ dina tapet i dag, hämta dem hos närmaste återförsäljare inom 1-2 vardagar, oftast i morgon.",controls:{breadths:{showBreadths:"Visa våder",hideBreadths:"Utan våder"}},supplement:{header:"Tillägg",laminate_description:"Laminera tapeten för extra hållbarhet"}},wallpaper:{collection:"Graceful Stories 7291",lamination_price:3e3,length:300,pattern_height:265,pattern_width:360,price:29500,roll_length:265,roll_width:45,sku:887,title:"Nocturne Mural",width:75},cuttings:{cutFromX:0,cutToX:0,cutFromY:0,cutToY:0}},getters:{getOverlaySize:function(t){return t.settings.overlaySize},getFilters:function(t){return t.filters},getWallpaperData:function(t){return t.wallpaper},getImageData:function(t){return t.image},getTranslations:function(t){return t.translations},getNumBreadths:function(t){var e=t.wallpaper,i=e.pattern_width/e.roll_width;return Math.ceil(i)}},mutations:{INITIALIZE_STORE:function(t){localStorage.getItem("muralappen")&&this.replaceState(Object.assign(t,JSON.parse(localStorage.getItem("muralappen"))))},LOAD_IMAGE_DATA:function(t,e){e&&(t.image.url=e.mural.Image,t.wallpaper.collection=e.mural.collection,t.wallpaper.pattern_height=ht(e.mural.pattern_height),t.wallpaper.pattern_width=ht(e.mural.pattern_width),t.wallpaper.repeatsize=ht(e.mural.repeatsize),t.wallpaper.roll_length=ht(e.mural.roll_length),t.wallpaper.roll_width=ht(e.mural.roll_width),t.wallpaper.sku=e.mural.sku,t.wallpaper.title=e.mural.title)},STORE_SETTINGS_DATA:function(t,e){t.translations=e.translations,t.wallpaper.price=e.prices.mural_price,t.wallpaper.lamination_price=e.prices.lamination_price},SET_OVERLAY_SIZE:function(t,e){t.settings.overlaySize[e.type]=e.size},UPDATE_FILTERS:function(t,e){var i=t.filters;switch(e){case"breadths":i.showBreadths=!i.showBreadths;break;case"flip":i.flipHorizontal=!i.flipHorizontal;break;case"grayScale":i.grayScale=!i.grayScale;break;case"rotate":i.rotate+=90,i.rotate=i.rotate%360;break;case"zoomIn":i.zoom+=10;break;case"zoomOut":i.zoom>0&&(i.zoom-=10);break}},STORE_CUTTINGS_DATA:function(t,e){t.cuttings=e},STORE_LAMINATION:function(t,e){t.settings.laminate=e},SEND_ORDER_TO_CART:function(t){document.querySelector("#edit-line-item-fields-field-mural-wall-width-und-0-value").value=t.settings.overlaySize.width,document.querySelector("#edit-line-item-fields-field-mural-wall-height-und-0-value").value=t.settings.overlaySize.height,document.querySelector("#edit-line-item-fields-field-mural-cut-from-x-und-0-value").value=t.cuttings.cutFromX,document.querySelector("#edit-line-item-fields-field-mural-cut-to-x-und-0-value").value=t.cuttings.cutToX,document.querySelector("#edit-line-item-fields-field-mural-cut-from-y-und-0-value").value=t.cuttings.cutFromY,document.querySelector("#edit-line-item-fields-field-mural-cut-to-y-und-0-value").value=t.cuttings.cutToY,document.querySelector("#edit-line-item-fields-field-mural-lamination-und-1").checked=t.settings.laminate,document.querySelector("#edit-line-item-fields-field-mural-has-customization-und-1").checked=!0}},actions:{loadImageData:function(t,e){var i=t.commit;fetch("/api/mural/"+e).then((function(t){return t.json()})).then((function(t){return i("LOAD_IMAGE_DATA",t.murals[0])}))},loadSettingsData:function(t,e){var i=t.commit,a="/api/murals/settings";"sv"!==e&&(a="/"+e+a),fetch(a).then((function(t){return t.json()})).then((function(t){return i("STORE_SETTINGS_DATA",t)}))},setOverlaySize:function(t,e){var i=t.commit;i("SET_OVERLAY_SIZE",e)},updateFilters:function(t,e){var i=t.commit;i("UPDATE_FILTERS",e)},setCuttingsData:function(t,e){var i=t.commit;i("STORE_CUTTINGS_DATA",e)},setLamination:function(t,e){var i=t.commit;i("STORE_LAMINATION",e)},sendOrder:function(t){var e=t.commit;e("SEND_ORDER_TO_CART")}}});function ht(t){var e=parseFloat(t);return 100*e}a["a"].config.productionTip=!1,new a["a"]({vuetify:et,store:ct,render:function(t){return t(K)}}).$mount("#mural-app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},"9c0c":function(t,e,i){}});
//# sourceMappingURL=app.js.map